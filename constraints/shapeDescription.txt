Definition 1:  A shape Ï• is defined as:
Ï•::= âŸ™  true
| ğœŸN  node belongs to the set of nodes N
| ğœ³ cond  node satisfies the Boolean condition cond
| Ï•1âˆ§Ï•2 conjunction of shape Ï•1 and shape Ï•2
| Â¬Ï• negation of shape Ï•
| @s reference to shape with label s
| â†’p Ï• {min,max} between min and max outward edges (inclusive) with label p to nodes satisfying Ï•

Definition 2:  A shape schema is defined as a tuple
ğšº=(ğœ±,S,ğ›Œ), where:
ğœ± is a set of shapes
S a set of shape labels
ğ›Œ: S â†’ ğœ± is a total function from labels to shapes.

Example of Shape Schema:
ğšº=(ğœ±,S,ğ›Œ)
ğœ±={â†’ex:name string {1,1} ,
       â†’ex:title string {1,1} âˆ§
       â†’ex:year date {1,1} âˆ§
       â†’ex:hasAuthor  exS:Author {1,*} }
S={exS:Author,exS:Paper}
ğ›Œ(exS:Author)=â†’ex:name string {1,1}
ğ›Œ(exS:Paper)=â†’ex:title string {1,1} âˆ§
                       â†’ex:year date {1,1} âˆ§
                            â†’ex:hasAuthor  exS:Author {1,*} 
Definition 3:  Given a directed edge-labelled graph G=(V,E,L) and a shapes schema  ğšº=(ğœ±,S,ğ›Œ), a shapes map is a (partial) mapping 
ğ›”: V x S â†’ {0,1} 

The shapes map ğ›” is a way of labelling the nodes of G with the labels of shapes in S. 
ğ›”(v,s)=1, then node v is labelled with s
otherwise, ğ›”(v,s)=0

Definition 4:  Given a shapes schema  ğšº=(ğœ±,S,ğ›Œ) and a directed edge-labelled graph G=(V,E,L), a node v âˆˆ V, and a total shapes map ğ›”. 
The shape evaluation function [Ï•]G,v,ğ›” âˆˆ {0,1} is defined as follows:
-) [âŸ™]G,v,ğ›”  =1
-) [ğœŸN ]G,v,ğ›”  =1 iff  v âˆˆ N 
-) [ğœ³ cond]G,v,ğ›”  =1 iff cond(v) is true  
-) [Ï•1âˆ§Ï•2]G,v,ğ›”  = min{[Ï•1]G,v,ğ›”,[Ï•2]G,v,ğ›” } 
-) [Â¬Ï•]G,v,ğ›”  = 1 -  [Ï•]G,v,ğ›” 
-) [@s]G,v,ğ›”  = 1 iff ğ›”(v,s)=1
-) [â†’p Ï• {min,max}]G,v,ğ›”  = 1 iff 
-) min â‰¤ |{(v,p,u) âˆˆ E | [Ï•]G,v,ğ›” =1 } |â‰¤ max
If [Ï•]G,v,ğ›” =1, then v is said to satisfy Ï• in G under ğ›”.

Definition 5. Given a shapes schema  ğšº=(ğœ±,S,ğ›Œ) and a directed edge-labelled graph G=(V,E,L).
A shapes target T âŠ† V x S is a set of pairs of nodes and shape labels from G and ğšº, respectively.

Definition 6. Given a shapes schema  ğšº=(ğœ±,S,ğ›Œ) and a directed edge-labelled graph G=(V,E,L), and a shapes target T. 
G is valid under ğšº and T iff:
-) there exists a shapes map ğ›”, such that, 
  for all s âˆˆ S and v âˆˆ V it holds that ğ›”(v,s)= [ğ›Œ(s)]G,v,ğ›”(v,s) âˆˆ T implies ğ›”(v,s)=1


SHACL: W3C recommendation language for the declarative specification of integrity constraints over RDF KGs.
A SHACL shape: 
-) represents a set of constraints that apply over the same entities.
-) can refer to another shape, to represent constraints between entities of two types.

Namespaces in SHACL
@prefix exS: <http://example.org/shapes> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

A generic definition of a â€œNode Shapeâ€:
exS:YourShape a sh:NodeShape ;
       sh:targetClass ex:CLASS ;
       sh:property [
       sh:path ex:ATTRIBUTE ; 
       sh:datatype xsd:TYPE ; 
       sh:node exS:SHAPE ;
       sh:minCount Min ; 
       sh:maxCount Max].

In a â€œNode Shapeâ€:
-) sh:targetClass defines the target node.
-) sh:property states the property over which the constraint is defined.
-) sh:path declares the path that goes from focus node to the values that they describe. Usually this is the IRI of a property.
-) sh:datatype declares the datatype.
-) sh:node declares the shape to be checked for the object entities of an object property.
-) sh:minCount estates the min cardinality.
-) sh:maxCount estates the max cardinality
